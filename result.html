<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Consultez les réalisations d’ACLRS, spécialisées dans les travaux de finition. Découvrez nos résultats concrets.">

    <title>ACLRS : Nos réalisations (peinture intérieure, carrelage, etc)</title>
    <link rel="stylesheet" href="result_style.css">
    <link rel="icon" href="logo/logo.ico" type="image/x-icon">
    <link rel="canonical" href="https://www.aclrs.fr/result.html" />
</head>

<body>
    <header class="banner">
        <!-- 垂れ幕 -->
        <h1 class="header-title">ACLRS</h1>

        <nav>
            <a href="index.html" id="home-link">Accueil</a><br><br>
            <a href="about_us.html">À propos</a><br><br>
            <a href="blog.html">Articles</a><br><br>
            <a href="#" class="actual-page">Nos réalisations</a><br><br>
            <a href="contact.html">Contact</a>
        </nav>

        <span class="menu-mark">...</span>
    </header>

    <nav class="fixed-link">
        <a href="index.html" class="home">
            <img src="img/logo ACLRS.png" alt="Le logo de l'entreprise ACLRS">
        </a>
        <a href="contact.html" class="contact">Contactez-nous</a>
    </nav>

    <!-- コンテンツ -->
    <section class="container">
        <section class="content first-content">
            <h1>Nos réalisations récentes</h1>

            <div class="result-show">
                <button class="left"><img src="img/left.png" class="arrow"></button>

                <div class="result-container">
                    <div class="result before">
                        <img src="img/before/wall.jpg" alt="Image état d'avant">
                        <div class="description before">
                            <h2>Before</h2>
                        </div>
                    </div>

                    <div class="result after">
                        <img src="img/after/wall.jpg" alt="Image état d'après">
                        <div class="description after">
                            <h2>After</h2>
                        </div>
                    </div>
                </div>
                
                <button class="right"><img src="img/right.png" class="arrow"></button>
            </div>
        </section>
    </section>

    <footer>
        <div class="info">
            <p>Région : <i>Nous sommes basés sur Saran</i></p>
        </div>

        <nav class="media-link">
            <a href="https://www.instagram.com/aclrs_rs/" target="_blank" rel="noopener noreferrer">
                <button><img src="img/instagram.png" alt="logo Instagram"></button>
            </a>
            <a href="https://www.linkedin.com/company/aclrs/" target="_blank" rel="noopener noreferrer">
                <button><img src="img/linkedin.png" alt="logo LinkedIn"></button>
            </a>
        </nav>
    </footer>

    <script>
        const before_images = ["chantier thum.png", "ai.jpg", "sup.png"];
        const after_images = ["centre thum.png", "1.jpg", "transparence.png"];
        let index = 0;

        const leftBtn  = document.querySelector(".left");
        const rightBtn = document.querySelector(".right");
        const beforeImg = document.querySelector(".result.before img");
        const afterImg  = document.querySelector(".result.after img");
        const container = document.querySelector(".result-container");
        const beforeResult = document.querySelector(".result.before");
        const afterResult  = document.querySelector(".result.after");

        // 画像更新関数
        function updateImages() {
            beforeImg.src = "img/before/" + before_images[index];
            afterImg.src  = "img/after/" + after_images[index];
        }

        // before/afterアニメーションをリセット（0%から再生）
        function resetAnimations() {
            [beforeResult, afterResult].forEach(el => {
                el.style.animation = "none";
                void el.offsetWidth;
                el.style.animation = "";
            });
        }

        // 左方向アニメーション＋切り替え処理
        function triggerMove(direction = "left") {
            container.classList.remove("left-move", "right-move");
            void container.offsetWidth;

            container.classList.add(direction === "left" ? "left-move" : "right-move");

            // 半分経過時点で画像を切り替え
            setTimeout(() => {
                if (direction === "right") {
                    index = (index + 1) % before_images.length;
                } else {
                    index = (index - 1 + before_images.length) % before_images.length;
                }

                updateImages();
                resetAnimations(); // ← ここでbefore/afterのフェードアニメーションをリセット
                restartAutoSlide();
            }, 750);

            // アニメーション終了後クラス削除
            container.addEventListener("animationend", () => {
                container.classList.remove("left-move", "right-move");
            }, { once: true });
        }

        // 自動スライド機能（6秒ごと）
        let autoSlide = setInterval(() => {
            triggerMove("left");
        }, 4800); // ← CSSアニメーション（6s）と同期

        // 手動操作（クリック）時も同様に動作
        rightBtn.addEventListener("click", () => {
            triggerMove("left");
        });

        leftBtn.addEventListener("click", () => {
            triggerMove("right");
        });

        // 手動操作時に自動スクロールをリセット（滑らかに再スタート）
        function restartAutoSlide() {
            clearInterval(autoSlide);
            autoSlide = setInterval(() => {
                triggerMove("left");
            }, 4800);
        }

        updateImages();
    </script>
</body>
</html>